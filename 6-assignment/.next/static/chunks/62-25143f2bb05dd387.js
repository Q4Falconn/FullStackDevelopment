"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{6010:function(r,e,t){t.d(e,{a1:function(){return i}});let n=r=>Math.floor(Math.random()*r);function o(r){for(let e=0;e<r.length-1;e++){let t=Math.floor(Math.random()*(r.length-e)+e),n=r[t];r[t]=r[e],r[e]=n}}var l=t(2239);function i(r,e){var t,i;if(r.players.length<2)throw Error("A game must have at least two players.");if(r.targetScore<=0)throw Error("Target score must be positive.");if(r.scores.some(r=>r<0))throw Error("Scores must be non-negative.");if(r.scores.length!==r.players.length)throw Error("Scores length must match players length.");if(r.scores.filter(e=>e>r.targetScore).length>1)throw Error("There can be at most one winner.");let a={randomizer:null!==(t=null==e?void 0:e.randomizer)&&void 0!==t?t:n,shuffler:null!==(i=null==e?void 0:e.shuffler)&&void 0!==i?i:o},u=(()=>{for(let e=0;e<r.scores.length;e++)if(r.scores[e]>=r.targetScore)return e})();if(void 0===u&&void 0===r.currentRound)throw Error("An unfinished game must have a current round in the memento.");let s=void 0===u?(0,l.a1)(r.currentRound,a.shuffler):void 0;return{state:{players:[...r.players],scores:[...r.scores],targetScore:r.targetScore,cardsPerPlayer:r.cardsPerPlayer,currentRound:s},runtime:a}}},2239:function(r,e,t){t.d(e,{tW:function(){return i},a1:function(){return a},$m:function(){return l}});let n=["BLUE","GREEN","RED","YELLOW"],o=["SKIP","REVERSE","DRAW","NUMBERED","WILD","WILD DRAW"];function l(r,e){var t;return null!==(t=r.hands[e])&&void 0!==t?t:[]}function i(r,e){var t;if(r.hands.some(r=>0===r.length))return!1;let n=r.playerInTurn;if(void 0===n)return!1;let o=null!==(t=r.hands[n])&&void 0!==t?t:[];if(e<0||e>=o.length)return!1;let l=o[e],i=r.discardPile[0];if(!i)throw Error("Discard pile is empty");let a=o.some(e=>"WILD"!==e.type&&"WILD DRAW"!==e.type&&"color"in e&&e.color===r.currentColor);return("WILD DRAW"!==l.type||!a)&&("WILD"===l.type||"WILD DRAW"===l.type||"color"in l&&l.color===r.currentColor||l.type===i.type&&"NUMBERED"!==l.type||"NUMBERED"===l.type&&"NUMBERED"===i.type&&l.number===i.number)}function a(r,e){let t=[...r.players];!function(r){if(r.length<2||r.length>10)throw Error("A round requires at least ".concat(2," players and at most ").concat(10," players."))}(t);let l=r.hands.map(r=>[...r]),i=r.drawPile,a=r.discardPile;if(l.filter(r=>0===r.length).length>1)throw Error("There are two or more winners in the memento");if(l.length!==t.length)throw Error("Memento hands length does not match number of players");if(!a||0===a.length)throw Error("Memento discard pile is empty");if(void 0===r.currentColor||!n.includes(r.currentColor))throw Error("Memento is missing currentColor");if(r.dealer<0||r.dealer>=t.length)throw Error("Memento has invalid dealer index");let u=a[0];if("WILD"!==u.type&&"WILD DRAW"!==u.type&&u.color!==r.currentColor)throw Error("Memento currentColor does not match top card color");let s=l.some(r=>0===r.length);if(void 0===r.playerInTurn&&!s)throw Error("Memento is missing playerInTurn");if(r.playerInTurn<0||r.playerInTurn>=t.length)throw Error("Memento has invalid playerInTurn index");return{players:t,dealer:r.dealer,hands:l,drawPile:function(r){if(!function(r){if(!Array.isArray(r)||!r.every(r=>o.includes(null==r?void 0:r.type)))return!1;for(let e of r)if("NUMBERED"===e.type){if(void 0===e.color||void 0===e.number)return!1}else if(["SKIP","REVERSE","DRAW"].includes(e.type)&&void 0===e.color)return!1;return!0}(r))throw Error("Invalid cards in deck memento");return{cards:[...r]}}(i),discardPile:a,currentColor:r.currentColor,currentDirection:r.currentDirection,playerInTurn:s?void 0:r.playerInTurn,unoCalledBy:[]}}}}]);